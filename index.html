<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8"> 
	<title>LaunchPad Challenge</title>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<div class="container">
	<h1>Client-Side JS Libraries</h1>
	<p id='date'> The time is </p>
	<h2> React.js </h2>
	<p id='React-data'></p>
	<h2> Angular.js </h2>
	<p id='Angular-data'></p>
	<h2> Ember.js </h2>
	<p id='Ember-data'></p>
	<h2> Vue.js </h2>
	<p id='Vue-data'></p>
</div>

<script>
	function getDataHTML(url, elementId) {
		return fetch(url).then((resp) => {
			return resp.json();
		}).then((data) => {
			elementTitle = elementId.split('-')[0]
			document.getElementById(elementId).innerHTML = elementTitle + ' stats: </br>';
			document.getElementById(elementId).innerHTML += data.watchers.toLocaleString() + ' followers' + '<br/>';
			document.getElementById(elementId).innerHTML += data.open_issues.toLocaleString() + ' issues' + '<br/>';
			document.getElementById(elementId).innerHTML += 'Network count: ' + data.network_count.toLocaleString() + '<br/>';
		});
	};

	var now = new Date();
	document.getElementById('date').innerHTML += now;

	let promises = [];
	promises.push(getDataHTML('https://api.github.com/repos/facebook/react', 'React-data'));
	promises.push(getDataHTML('https://api.github.com/repos/angular/angular.js', 'Angular-data'));
	promises.push(getDataHTML('https://api.github.com/repos/emberjs/ember.js', 'Ember-data'));
	promises.push(getDataHTML('https://api.github.com/repos/vuejs/vue', 'Vue-data'));
	Promise.all(promises);

	setInterval(function() {
		let promises = [];
		promises.push(getDataHTML('https://api.github.com/repos/facebook/react', 'React-data'));
		promises.push(getDataHTML('https://api.github.com/repos/angular/angular.js', 'Angular-data'));
		promises.push(getDataHTML('https://api.github.com/repos/emberjs/ember.js', 'Ember-data'));
		promises.push(getDataHTML('https://api.github.com/repos/vuejs/vue', 'Vue-data'));
		return Promise.all(promises);
	}, 5000)
</script>

</html>